"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[928],{7938:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"wazuh/agent_configuratie","title":"Installatie en Deploy van de Wazuh Windows-Agent","description":"Deze handleiding beschrijft stap voor stap hoe je de Wazuh-agent installeert en configureert op een Windows-machine, zodat deze verbinding maakt met een lokaal draaiende Wazuh-server (bijvoorbeeld een single-node Docker-implementatie).","source":"@site/docs/wazuh/agent_configuratie.md","sourceDirName":"wazuh","slug":"/wazuh/agent_configuratie","permalink":"/documentation/docs/wazuh/agent_configuratie","draft":false,"unlisted":false,"editUrl":"https://github.com/Project-Cybersecurity-HVA/documentation/tree/main/docs/wazuh/agent_configuratie.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Testen van de Usecases","permalink":"/documentation/docs/testen_van_de_usecases"},"next":{"title":"Local Rules (Wazuh)","permalink":"/documentation/docs/wazuh/local_rules"}}');var r=s(4848),l=s(8453);const t={},a="Installatie en Deploy van de Wazuh Windows-Agent",d={},o=[{value:"1. Vereisten",id:"1-vereisten",level:2},{value:"4. Firewallconfiguratie",id:"4-firewallconfiguratie",level:2},{value:"5. De agent starten en controleren",id:"5-de-agent-starten-en-controleren",level:2},{value:"6. Veelvoorkomende issues en troubleshooting",id:"6-veelvoorkomende-issues-en-troubleshooting",level:2},{value:"7. Veelgestelde vragen (FAQ)",id:"7-veelgestelde-vragen-faq",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"installatie-en-deploy-van-de-wazuh-windows-agent",children:"Installatie en Deploy van de Wazuh Windows-Agent"})}),"\n",(0,r.jsx)(n.p,{children:"Deze handleiding beschrijft stap voor stap hoe je de Wazuh-agent installeert en configureert op een Windows-machine, zodat deze verbinding maakt met een lokaal draaiende Wazuh-server (bijvoorbeeld een single-node Docker-implementatie)."}),"\n",(0,r.jsx)(n.h2,{id:"1-vereisten",children:"1. Vereisten"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Windows-versie"}),": Windows 10 (Pro/Enterprise) of Windows Server 2016/2019/2022"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Administrator-rechten"}),": Open PowerShell als Administrator om de MSI te installeren"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PowerShell 3.0 of hoger"}),": Controleer met:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"$PSVersionTable.PSVersion\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\n* **Netwerk**: De Wazuh-manager draait op dezelfde host, bereikbaar via `localhost` (127.0.0.1)\n* **Poorten opengezet**:\n\n  * UDP 1514 (log-verkeer)\n  * TCP 1515 (agent-registratie)\n  * TCP 443 (Kibana/Wazuh-dashboard)\n    Zorg dat Windows Defender Firewall of een andere firewall deze poorten toestaat (zie sectie 4)\n\n\n## 2. Installatiepakket kiezen\n\nWazuh biedt voor Windows een MSI-installer aan. Kies in de UI of op de downloadpagina het juiste installatiepakket:\n\n| Architectuur                    | Installatiebestand  |\n| ------------------------------- | ------------------- |\n| 32-bit / 64-bit Intel (x86/x64) | MSI \u2013 Intel         |\n| Apple Silicon (M1/M2, etc.)     | MSI \u2013 Apple Silicon |\n\nVoorbeelden van beschikbare downloads (versie 4.12.0):\n\n* **Intel MSI**:\n  `https://packages.wazuh.com/4.x/windows/wazuh-agent-4.12.0-1.msi`\n\n* **Apple Silicon MSI**:\n  `https://packages.wazuh.com/4.x/windows/wazuh-agent-4.12.0-1-arm64.msi`\n\nIn dit document gaan we ervan uit dat je de **Intel (32/64-bit) MSI** (versie 4.12.0) downloadt.\n\n\n\n## 3. Download en installatie\n\n1. **Open PowerShell als Administrator**\n\n   * Klik op Start, typ "PowerShell", rechtsklik op "Windows PowerShell" en kies **Als administrator uitvoeren**.\n\n2. **Download de Wazuh-agent MSI**\n   Navigeer naar een tijdelijke map (bijvoorbeeld je Downloads-folder) en voer het volgende commando uit:\n\n   ```powershell\n   cd ~\\Downloads\n   Invoke-WebRequest -Uri "https://packages.wazuh.com/4.x/windows/wazuh-agent-4.12.0-1.msi" `\n                     -OutFile "wazuh-agent-4.12.0-1.msi"\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Installeer de Wazuh-agent"}),"\nVervang in dit commando:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"127.0.0.1"})," \u2192 het IP of de FQDN van je Wazuh-manager"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MyAgentName"})," \u2192 een unieke naam voor de agent (mag geen spaties bevatten)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Default"})," \u2192 de groep waarin deze agent wordt geplaatst"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'msiexec.exe /i "wazuh-agent-4.12.0-1.msi" `\n  /qn `\n  WAZUH_MANAGER="127.0.0.1" `\n  WAZUH_AGENT_NAME="MyAgentName" `\n  WAZUH_AGENT_GROUPS="Default" `\n  /l*v "C:\\Windows\\Temp\\wazuh-agent-install.log"\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/qn"})," \u2192 stille installatie zonder GUI"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/l*v \u2026"})," \u2192 schrijft een uitgebreid installatie-log naar Windows Temp"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"(Optioneel) MSI via GUI"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Dubbelklik op ",(0,r.jsx)(n.code,{children:"wazuh-agent-4.12.0-1.msi"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Bij ",(0,r.jsx)(n.strong,{children:"Server address"})," voer je in: ",(0,r.jsx)(n.code,{children:"127.0.0.1"})]}),"\n",(0,r.jsxs)(n.li,{children:["Onder ",(0,r.jsx)(n.strong,{children:"Assign an agent name"})," geef je een unieke naam (bijvoorbeeld ",(0,r.jsx)(n.code,{children:"MyAgentName"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Onder ",(0,r.jsx)(n.strong,{children:"Select one or more existing groups"}),' kies je "Default" (of een andere groep).']}),"\n",(0,r.jsxs)(n.li,{children:["Klik op ",(0,r.jsx)(n.strong,{children:"Install"})," en wacht tot de installatie is voltooid."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"4-firewallconfiguratie",children:"4. Firewallconfiguratie"}),"\n",(0,r.jsx)(n.p,{children:"Zorg dat de agent met de manager kan communiceren door deze regels in Windows Defender Firewall in te stellen:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Open ",(0,r.jsx)(n.strong,{children:"Windows Defender Firewall met geavanceerde beveiliging"}),' (via Start \u2192 typ "Windows Defender Firewall\u2026").']}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Ga naar ",(0,r.jsx)(n.strong,{children:"Inkomende regels"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Nieuwe regel\u2026"})," \u2192 kies ",(0,r.jsx)(n.strong,{children:"Poort"})," \u2192 klik ",(0,r.jsx)(n.strong,{children:"Volgende"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Selecteer ",(0,r.jsx)(n.strong,{children:"UDP"}),", vul ",(0,r.jsx)(n.strong,{children:"1514"})," in, klik ",(0,r.jsx)(n.strong,{children:"Volgende"})," \u2192 kies ",(0,r.jsx)(n.strong,{children:"Verbinding toestaan"})," \u2192 klik ",(0,r.jsx)(n.strong,{children:"Volgende"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Selecteer de gewenste profielen (Domain, Private, Public) \u2192 klik ",(0,r.jsx)(n.strong,{children:"Volgende"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Geef de regel de naam:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Wazuh UDP 1514\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Klik op ",(0,r.jsx)(n.strong,{children:"Voltooien"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Herhaal stap 2 t/m 5 voor ",(0,r.jsx)(n.strong,{children:"TCP-poorten 1515 en 443"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Kies ",(0,r.jsx)(n.strong,{children:"Poort"})," \u2192 ",(0,r.jsx)(n.strong,{children:"TCP"}),' \u2192 "1515,443" \u2192 ',(0,r.jsx)(n.strong,{children:"Verbinding toestaan"})," \u2192 kies profielen \u2192 naam"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Wazuh TCP 1515 & 443\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Ga naar ",(0,r.jsx)(n.strong,{children:"Uitgaande regels"})," \u2192 maak dezelfde twee regels aan (UDP 1514 en TCP 1515/443) zodat eventuele outbound-restricties ook worden opgeheven."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"5-de-agent-starten-en-controleren",children:"5. De agent starten en controleren"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Start de Wazuh-agent (indien nodig)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"net start wazuh-agent\n"})}),"\n",(0,r.jsx)(n.p,{children:"Je ziet:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"The Wazuh Agent service was started successfully.\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Controleer in Services"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.strong,{children:"Services"})," (",(0,r.jsx)(n.code,{children:"services.msc"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Zoek naar ",(0,r.jsx)(n.strong,{children:"Wazuh Agent"}),'. De status moet "Running" zijn.']}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Bekijk de agentlog voor fouten"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'cd "C:\\Program Files\\Wazuh\\logs"\ntype ossec.log\n'})}),"\n",(0,r.jsx)(n.p,{children:"Je zou regels moeten zien zoals:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"2025/06/01 13:45:12 ossec-agentd: INFO: (6001): Started agent-based daemon.\n2025/06/01 13:45:15 ossec-agentd: INFO: (2042): Connected to the Wazuh manager (127.0.0.1:1515).\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Als er fouten staan (zoals "Connection refused" of "Timeout"), controleer firewall en of de manager in Docker draait.'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Verifieer in het Wazuh-dashboard (Kibana)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Open je browser en ga naar:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"https://localhost\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Log in op het Wazuh-dashboard \u2192 navigeer naar ",(0,r.jsx)(n.strong,{children:"Wazuh \u2192 Agents"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["De Windows-agent moet hier met status ",(0,r.jsx)(n.strong,{children:"Active"})," verschijnen."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"6-veelvoorkomende-issues-en-troubleshooting",children:"6. Veelvoorkomende issues en troubleshooting"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Agent verschijnt niet in Dashboard"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Herstart de agentdienst:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"Restart-Service wazuh-agent\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Controleer in Docker dat de manager actief is:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"docker ps\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Zoek naar ",(0,r.jsx)(n.code,{children:"single-node-wazuh.manager-1"}),". De status moet ",(0,r.jsx)(n.strong,{children:"Up"})," zijn en de poorten 1514/1515 open hebben."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Bekijk de manager-logs op connecties:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"docker exec -it single-node-wazuh.manager-1 /bin/bash\ntail -n 20 /var/ossec/logs/ossec.log\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Zoek naar regels zoals "New agent connection from 127.0.0.1".'}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"UDP-1514 niet bereikbaar"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Controleer de firewallregels (zie sectie 4)."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Test of de Wazuh-manager-container op UDP 1514 luistert:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"netstat -an | findstr 1514\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Je zou iets moeten zien als:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"UDP    0.0.0.0:1514           *:*\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Voer de UDP-test in PowerShell uit:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'$udpClient = New-Object System.Net.Sockets.UdpClient\n$endpoint = New-Object System.Net.IPEndPoint([System.Net.IPAddress]::Parse("127.0.0.1"), 1514)\n$message = [System.Text.Encoding]::ASCII.GetBytes("UDP Test")\n$bytesSent = $udpClient.Send($message, $message.Length, $endpoint)\n$udpClient.Close()\nWrite-Host "Verstuurd $bytesSent bytes naar UDP 1514"\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Controleer in de manager-logs of het pakket aankomt."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Verkeerd serveradres ingevoerd"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tijdens MSI-installatie kan het adres niet achteraf worden gewijzigd."}),"\n",(0,r.jsxs)(n.li,{children:["Verwijder de agent, verwijder de map ",(0,r.jsx)(n.code,{children:"C:\\Program Files\\Wazuh"}),", en installeer opnieuw met het juiste adres."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"7-veelgestelde-vragen-faq",children:"7. Veelgestelde vragen (FAQ)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:['"Kan ik in plaats van ',(0,r.jsx)(n.code,{children:"localhost"}),' ook mijn LAN-IP invullen?"']}),"\nJa, als de Wazuh-manager in Docker via dat LAN-IP bereikbaar is (bijv. ",(0,r.jsx)(n.code,{children:"192.168.1.10:1515"}),"), kun je dit IP opgeven tijdens de installatie. Zorg dat de Docker-poortbinding juist is en dat de firewall dit LAN-verkeer toestaat."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:'"Hoe geef ik meerdere groepen op?"'}),"\nTijdens stille installatie (MSI) kun je meerdere groepen comma-gescheiden opgeven:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'msiexec.exe /i "wazuh-agent-4.12.0-1.msi" /qn `\n  WAZUH_MANAGER="127.0.0.1" `\n  WAZUH_AGENT_GROUPS="GroupA,GroupB"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:'"Waar vind ik de agentconfiguratie na installatie?"'}),"\nDe configuratiebestanden staan in:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"C:\\Program Files\\Wazuh\\etc\\ossec.conf\n"})}),"\n",(0,r.jsx)(n.p,{children:"Pas hierin instellingen aan (bijvoorbeeld logging-levels), en herstart dan de dienst:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"Restart-Service wazuh-agent\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);